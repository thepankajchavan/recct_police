import{bm as r,r as a,u as m,b5 as d,bk as h,t as i}from"./app-47b17f36.js";function v(){return{login:t=>r.post("/login",t),register:t=>r.post("/register",t),forgetPassword:t=>r.post("/forgot-password",t)}}const k=v();function L(){const[t,o]=a.useState(!1),s=m(),u=d(),{isAuthenticated:c,saveSession:l}=h(),n=a.useMemo(()=>s.state&&s.state.from?s.state.from.pathname:"/",[s.state]);return{loading:t,login:async(g,{email:f,password:p})=>{g.preventDefault(),o(!0);try{const e=await k.login({email:f,password:p});o(!1),i.success("Login successful!"),setTimeout(()=>{e.token&&(console.log(e),l({...e.user??{},token:e.token}),u(n))},1500)}catch{o(!1),i.error("Invalid email or password!")}},redirectUrl:n,isAuthenticated:c}}export{L as u};
